<head>
	<title> pokecalk, the K make it look Kool</title>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
	

<!--	<script type="text/javascript" src="http://pkmn-argentina.com/halloffame/reborn/js/data.js?v=20"></script>-->
	<script type="text/javascript" src="./scripts/data.js"></script>


	<link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
	<script src="./bootstrap/js/bootstrap.min.js"></script>
	
	<link rel="stylesheet" href="./roldex.css">
	
	<script>
	function cargarpk(){	
		
		
		p=document.getElementById("pokes");
		p= cachedMons[p.options[p.selectedIndex].value];		
		document.getElementById("sprite").src= p.sprites.front_default;
		if(p.types.length==2)
			document.getElementById("type").innerHTML= p.types[1].type.name +" / "+ p.types[0].type.name;
		else
			document.getElementById("type").innerHTML= p.types[0].type.name;
		

		//Base Stats
		document.getElementById("stats_id").innerHTML="<th>Stat</th>";
		document.getElementById("stats_b").innerHTML="<th>Base</th>";
		for( i=5; i>=0; i--){		
			si = document.createElement("tr");
			
			//stat name
			sid= document.getElementById("stats_id");
			sid2= document.createElement("th");
			sid2.innerHTML= p.stats[i].stat.name;
			sid.appendChild(sid2);
			
			//stat value
			sid= document.getElementById("stats_b");
			sid2= document.createElement("td");
			sid2.innerHTML= p.stats[i].base_stat;
			sid.appendChild(sid2);
			
			
		}
		
		
		//holy mother of shit
		s= document.getElementById("stats");
		s.innerHTML="";
		
		var allvals = new Array(100);
		for (lvl=1; lvl<=100; lvl++){
			allvals[lvl]= new Array(6);
			for( i=5; i>=0; i--){
				neutral_nat= 1 + Math.floor(lvl * p.stats[i].base_stat / 1100);
				positive_nat=1 + Math.floor(lvl * (p.stats[i].base_stat + 10) / 1100);
				negative_nat=1 + Math.floor(lvl * (p.stats[i].base_stat - 10) / 1100);				
				allvals[lvl][i]=neutral_nat;
				if (neutral_nat!=positive_nat)
					allvals[lvl][i]+= " ("+positive_nat+")";
				if (neutral_nat!=negative_nat)
					allvals[lvl][i]+= " ("+negative_nat+")";
			}
			
			
		}
	
		
		
		prev=1;
		for (lvl=2; lvl<=100; lvl++){
		igual=true;
			for(i=0; i<6; i++)
				igual=igual & (allvals[lvl][i]==allvals[lvl-1][i])
			if(igual)
				allvals[lvl-1]=[-1];
			else{
					si = document.createElement("tr");
					
					siv= document.createElement("td");
					siv.setAttribute("colspan",100);
					if(prev!=lvl)
						siv.innerHTML=prev+" - "+(lvl-1);
					else
						siv.innerHTML=lvl;
					si.appendChild(siv);
					prev= lvl;
					for(i=5; i>=0; i--){
						siv= document.createElement("td");
						siv.setAttribute("colspan",30);
						siv.innerHTML=allvals[lvl-1][i];
						si.appendChild(siv);
					}					
					
					s.appendChild(si);
				}
		}
		{
			si = document.createElement("tr");
			siv= document.createElement("td");
			siv.setAttribute("colspan",100);
			
			siv.innerHTML=prev+" - "+100;
			si.appendChild(siv);			
			for(i=5; i>=0; i--){
				siv= document.createElement("td");
				siv.setAttribute("colspan",30);
				siv.innerHTML=allvals[100][i];
				si.appendChild(siv);
			}
			s.appendChild(si);
		}
		
		
		mt= document.getElementById("moves");
		mt.innerHTML= '<tr><th>Moves</th></tr>';
		p.moves.forEach(
		function tablear(value, index, array){
			m= document.createElement("tr");
			m.innerHTML= "<td>"+value.move.name+"</td><td>"+value.version_group_details[0].move_learn_method.name+"</td>";
			if(value.version_group_details[0].level_learned_at>0)
				m.innerHTML+="<td>"+value.version_group_details[0].level_learned_at+"</td>";
			
			mt.appendChild(m);
		});
		
	}
	
	</script>
	
	<script>
		function swapview(V){
			if(V==1){
				document.getElementById("statsC").setAttribute("class","col-sm-12");
				document.getElementById("movesC").setAttribute("class", "col-sm-12 d-none");
			}
			else{
				document.getElementById("statsC").setAttribute("class","col-sm-12 d-none");
				document.getElementById("movesC").setAttribute("class", "col-sm-12");
				}
		}
	</script>
	
</head>

<body>
	
	<div class="container">
	
		<div class="row">
			<div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
				buscar:
			</div>
			<div class="col-xs-12 col-sm-6 col-md-9 col-lg-9">
				<select name="pokes" id="pokes" onchange="cargarpk()">
				</select>
			</div>
		</div>
		
		<br/>
			
		<div class="row">
			<div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
				<div class="row">
					<img id="sprite" src="">				
					<a class="align-self-center" id="type"></a>
				</div>
				<div class="row d-md-none">
					<button type="button" class="btn btn-light" onclick="swapview(1)">
						Attacks
					</button>
					<button type="button" class="btn btn-light" onclick="swapview(2)">
						Moves
					</button>
				</div>
			</div>

			<div class="col-xs-12 col-sm-8 col-md-9 col-lg-9">
				<div class="col-12">
					<table align="center">
						<thead>
							<tr id="stats_id">
							</tr>
						</thead>
						<tbody>
							<tr id="stats_b">
							</tr>
						</tbody>
					</table>
				</div>			
			</div>
		</div>
		
		
		<div class="row">
			<div id="statsC" class="col-sm-12 col-md-8">
				<table align="center">
					<thead>
						<tr>
							<th colspan="100">Dados / Nivel</th>
							<th colspan="30">HP</th>
							<th colspan="30">att</th>
							<th colspan="30">def</th>
							<th colspan="30">satt</th>
							<th colspan="30">sdef</th>
							<th colspan="30">spd</th>
						</tr>
					</thead>
					<tbody id="stats">
					</tbody>
				</table>
			</div>
			<div id="movesC" class="col-sm-12 col-md-4" align="center">
				<table id="moves">
				</table>
			</div>
		
		</div>
		
	</div>

	<script>
		var txt="<option value='_'> </option>";
		var names= Object.keys(cachedMons);
		names.forEach(idk);
		
		function idk(value, index, array){
			txt+="<option value="+value+">"+value+"</option>";
		}

		document.getElementById("pokes").innerHTML =txt;
	</script>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
	
	
</body>